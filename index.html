<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PressBox ‚Äî Sports Media Intelligence</title>
<meta name="description" content="ESPN editorial tracker, trending content, broadcast schedule, and sports media analytics dashboard">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì∫</text></svg>">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0a0a0f;--surface:#12121a;--surface2:#1a1a26;--border:#2a2a3a;
--text:#e8e8f0;--dim:#8888a0;--accent:#c41e3a;--accent2:#ff4d6a;
--gold:#d4a843;--green:#2ecc71;--blue:#3498db;
}
body{font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.5;overflow-x:hidden}
a{color:var(--accent2);text-decoration:none}
a:hover{text-decoration:underline}

/* Header */
.header{background:linear-gradient(180deg,#0f0f18 0%,var(--bg) 100%);border-bottom:1px solid var(--border);padding:1.5rem 2rem;position:sticky;top:0;z-index:100;backdrop-filter:blur(20px)}
.header-inner{max-width:1400px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem}
.logo{display:flex;align-items:center;gap:0.75rem}
.logo-icon{font-size:1.8rem}
.logo h1{font-size:1.5rem;font-weight:700;letter-spacing:-0.02em}
.logo h1 span{color:var(--accent)}
.header-meta{display:flex;align-items:center;gap:1.5rem;font-size:0.85rem;color:var(--dim)}
.live-dot{width:8px;height:8px;background:var(--accent);border-radius:50%;display:inline-block;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}

/* Layout */
.container{max-width:1400px;margin:0 auto;padding:1.5rem}
.grid-main{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
@media(max-width:900px){.grid-main{grid-template-columns:1fr}}

/* Cards */
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.card-header{padding:1rem 1.25rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.card-header h2{font-size:1rem;font-weight:600;display:flex;align-items:center;gap:0.5rem}
.card-body{padding:1.25rem}
.card-full{grid-column:1/-1}

/* Ticker */
.ticker-wrap{background:var(--accent);overflow:hidden;padding:0.5rem 0}
.ticker{display:flex;animation:scroll 60s linear infinite;white-space:nowrap}
.ticker-item{padding:0 2rem;font-size:0.85rem;font-weight:600;color:white;display:flex;align-items:center;gap:0.5rem}
@keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* Trending */
.trending-item{display:flex;align-items:flex-start;gap:1rem;padding:0.875rem 0;border-bottom:1px solid var(--border)}
.trending-item:last-child{border-bottom:none}
.trending-rank{font-size:1.5rem;font-weight:800;color:var(--accent);min-width:2rem;text-align:center;line-height:1}
.trending-content h3{font-size:0.95rem;font-weight:600;margin-bottom:0.25rem}
.trending-meta{font-size:0.8rem;color:var(--dim);display:flex;gap:0.75rem;align-items:center}
.trending-tag{background:var(--surface2);border:1px solid var(--border);border-radius:4px;padding:0.1rem 0.4rem;font-size:0.7rem;text-transform:uppercase;letter-spacing:0.05em}

/* Broadcast */
.broadcast-item{display:flex;align-items:center;gap:1rem;padding:0.75rem 0;border-bottom:1px solid var(--border)}
.broadcast-item:last-child{border-bottom:none}
.broadcast-time{min-width:5rem;text-align:right;font-variant-numeric:tabular-nums;font-size:0.85rem;color:var(--dim)}
.broadcast-live{color:var(--accent);font-weight:700}
.broadcast-sport{font-size:0.75rem;text-transform:uppercase;letter-spacing:0.05em;color:var(--gold);min-width:4rem}
.broadcast-title{font-size:0.9rem;font-weight:500}
.broadcast-channel{font-size:0.75rem;color:var(--dim);margin-left:auto;white-space:nowrap}

/* Ratings Table */
.ratings-table{width:100%;border-collapse:collapse;font-size:0.85rem}
.ratings-table th{text-align:left;padding:0.6rem 0.75rem;border-bottom:2px solid var(--border);color:var(--dim);font-weight:500;text-transform:uppercase;font-size:0.7rem;letter-spacing:0.05em}
.ratings-table td{padding:0.6rem 0.75rem;border-bottom:1px solid var(--border)}
.ratings-table tr:last-child td{border-bottom:none}
.rating-bar{background:var(--surface2);border-radius:3px;height:6px;overflow:hidden;min-width:80px}
.rating-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--accent),var(--accent2))}
.change-up{color:var(--green)}
.change-down{color:var(--accent)}

/* Stats */
.stat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}
@media(max-width:700px){.stat-grid{grid-template-columns:repeat(2,1fr)}}
.stat-box{background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:1rem;text-align:center}
.stat-value{font-size:1.8rem;font-weight:800;letter-spacing:-0.02em}
.stat-label{font-size:0.75rem;color:var(--dim);text-transform:uppercase;letter-spacing:0.05em;margin-top:0.25rem}
.stat-change{font-size:0.8rem;margin-top:0.25rem}

/* Power Rankings */
.power-item{display:flex;align-items:center;gap:0.75rem;padding:0.6rem 0;border-bottom:1px solid var(--border)}
.power-item:last-child{border-bottom:none}
.power-rank{font-weight:700;font-size:1.1rem;min-width:1.8rem;text-align:center;color:var(--gold)}
.power-team{display:flex;align-items:center;gap:0.5rem;flex:1}
.power-team-dot{width:10px;height:10px;border-radius:50%}
.power-record{font-size:0.8rem;color:var(--dim);margin-left:auto}
.power-change{font-size:0.8rem;min-width:2rem;text-align:right}

/* Editorial */
.editorial-item{padding:0.875rem 0;border-bottom:1px solid var(--border)}
.editorial-item:last-child{border-bottom:none}
.editorial-item h3{font-size:0.95rem;font-weight:600;margin-bottom:0.3rem}
.editorial-byline{font-size:0.8rem;color:var(--dim)}
.editorial-category{display:inline-block;background:var(--accent);color:white;font-size:0.65rem;padding:0.15rem 0.4rem;border-radius:3px;text-transform:uppercase;letter-spacing:0.05em;margin-right:0.5rem;font-weight:600}

/* Footer */
.footer{text-align:center;padding:2rem;color:var(--dim);font-size:0.8rem;border-top:1px solid var(--border);margin-top:2rem}

/* Subtle glow */
.card:hover{border-color:#3a3a50;transition:border-color 0.3s}
</style>
</head>
<body>

<!-- Ticker -->
<div class="ticker-wrap">
<div class="ticker" id="ticker"></div>
</div>

<!-- Header -->
<div class="header">
<div class="header-inner">
<div class="logo">
<span class="logo-icon">üì∫</span>
<h1>Press<span>Box</span></h1>
</div>
<div class="header-meta">
<span><span class="live-dot"></span> Live Tracking</span>
<span id="clock"></span>
</div>
</div>
</div>

<!-- Stats -->
<div class="container">
<div class="stat-grid" id="stats"></div>
</div>

<!-- Main Grid -->
<div class="container" style="padding-top:0">
<div class="grid-main">

<!-- Trending Content -->
<div class="card">
<div class="card-header"><h2>üî• Trending on ESPN</h2><span style="font-size:0.8rem;color:var(--dim)">Today</span></div>
<div class="card-body" id="trending"></div>
</div>

<!-- Broadcast Schedule -->
<div class="card">
<div class="card-header"><h2>üì° Broadcast Schedule</h2><span style="font-size:0.8rem;color:var(--dim)" id="broadcast-date">Today</span></div>
<div class="card-body" id="broadcasts"></div>
</div>

<!-- Viewership Ratings -->
<div class="card card-full">
<div class="card-header"><h2>üìä Weekly Viewership Ratings</h2><span style="font-size:0.8rem;color:var(--dim)">Week of Feb 17‚Äì23</span></div>
<div class="card-body" style="overflow-x:auto">
<table class="ratings-table" id="ratings"></table>
</div>
</div>

<!-- Power Rankings -->
<div class="card">
<div class="card-header"><h2>üèÜ NBA Power Rankings</h2><span style="font-size:0.8rem;color:var(--dim)">Week 18</span></div>
<div class="card-body" id="power-rankings"></div>
</div>

<!-- Editorial Picks -->
<div class="card">
<div class="card-header"><h2>‚úçÔ∏è Editorial Picks</h2><span style="font-size:0.8rem;color:var(--dim)">Editor's Desk</span></div>
<div class="card-body" id="editorial"></div>
</div>

<!-- Historical Viewership Charts -->
<div class="card card-full">
<div class="card-header"><h2>üìà Historical Viewership Trends</h2><span style="font-size:0.8rem;color:var(--dim)">2020‚Äì2025 Seasons</span></div>
<div class="card-body">
<div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem">
<div><canvas id="chart-primetime"></canvas></div>
<div><canvas id="chart-events"></canvas></div>
</div>
<div style="margin-top:1.5rem"><canvas id="chart-platform" height="90"></canvas></div>
</div>
</div>

<!-- ESPN+ Highlights -->
<div class="card card-full">
<div class="card-header"><h2>üé¨ ESPN+ Most Watched This Week</h2></div>
<div class="card-body">
<div class="stat-grid" id="espn-plus" style="grid-template-columns:repeat(5,1fr)"></div>
</div>
</div>

</div>
</div>

<div class="footer">
<p>PressBox ‚Äî Sports Media Intelligence Dashboard</p>
<p style="margin-top:0.5rem">Data refreshes periodically. All ratings estimates based on publicly reported figures.</p>
</div>

<script>
/* PressBox ‚Äî Live ESPN API Integration
   Fetches real-time data from ESPN public APIs (no key needed)
   Auto-refreshes every 2 minutes */

const ESPN='https://site.api.espn.com/apis/site/v2/sports';
const SPORTS=[
  {key:'basketball/nba',icon:'üèÄ',tag:'NBA'},
  {key:'hockey/nhl',icon:'üèí',tag:'NHL'},
  {key:'football/nfl',icon:'üèà',tag:'NFL'},
  {key:'baseball/mlb',icon:'‚öæ',tag:'MLB'},
  {key:'soccer/usa.1',icon:'‚öΩ',tag:'MLS'},
  {key:'football/college-football',icon:'üèà',tag:'CFB'},
  {key:'basketball/mens-college-basketball',icon:'üèÄ',tag:'CBB'}
];
const NBA_COLORS={'Cleveland Cavaliers':'#6f263d','Boston Celtics':'#007a33','Oklahoma City Thunder':'#007ac1','Denver Nuggets':'#0e2240','New York Knicks':'#006bb6','Milwaukee Bucks':'#00471b','Golden State Warriors':'#1d428a','Memphis Grizzlies':'#5d76a9','Phoenix Suns':'#1d1160','Dallas Mavericks':'#00538c','Houston Rockets':'#ce1141','Minnesota Timberwolves':'#0c2340','Los Angeles Lakers':'#552583','Miami Heat':'#98002e','Philadelphia 76ers':'#006bb6','LA Clippers':'#c8102e','Sacramento Kings':'#5a2d81','Indiana Pacers':'#002d62','Orlando Magic':'#0077c0','Chicago Bulls':'#ce1141','Atlanta Hawks':'#e03a3e','San Antonio Spurs':'#c4ced4','Detroit Pistons':'#c8102e','Toronto Raptors':'#ce1141','Brooklyn Nets':'#000000','Portland Trail Blazers':'#e03a3e','Charlotte Hornets':'#1d1160','Utah Jazz':'#002B5C','New Orleans Pelicans':'#0C2340','Washington Wizards':'#002B5C'};

function safe(fn,fb=''){try{return fn()}catch(e){return fb}}
function timeAgo(iso){const ms=Date.now()-new Date(iso).getTime();const m=Math.floor(ms/60000);if(m<60)return m+'m ago';const h=Math.floor(m/60);if(h<24)return h+'h ago';return Math.floor(h/24)+'d ago'}
function fmtTime(iso){return new Date(iso).toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit'})}
function loading(id){document.getElementById(id).innerHTML='<div style="text-align:center;padding:2rem;color:var(--dim)">Loading live data‚Ä¶</div>'}

// Clock
function updateClock(){const d=new Date();document.getElementById('clock').textContent=d.toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric'})+' '+d.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'})}
updateClock();setInterval(updateClock,60000);

// Ticker: live scores
async function loadTicker(){
  const ticker=document.getElementById('ticker');const items=[];
  await Promise.all(SPORTS.slice(0,5).map(s=>
    fetch(ESPN+'/'+s.key+'/scoreboard').then(r=>r.json()).then(d=>{
      (d.events||[]).slice(0,3).forEach(ev=>{
        const c=ev.competitions?.[0];if(!c)return;
        const ts=c.competitors||[];const t0=ts[0],t1=ts[1];if(!t0||!t1)return;
        const n0=safe(()=>t0.team.abbreviation,'?'),n1=safe(()=>t1.team.abbreviation,'?');
        items.push(s.icon+' '+n1+' '+t1.score+', '+n0+' '+t0.score+' ‚Äî '+safe(()=>c.status.type.shortDetail,''));
      });
    }).catch(()=>{})
  ));
  if(!items.length)items.push('üì∫ PressBox ‚Äî Live Sports Intelligence Dashboard');
  const h=items.map(t=>'<span class="ticker-item">'+t+'</span>').join('');
  ticker.innerHTML=h+h;
}

// Stats
async function loadStats(){
  try{
    const [nba,nhl]=await Promise.all([fetch(ESPN+'/basketball/nba/scoreboard').then(r=>r.json()),fetch(ESPN+'/hockey/nhl/scoreboard').then(r=>r.json())]);
    const ng=(nba.events||[]).length,hg=(nhl.events||[]).length;
    const nl=(nba.events||[]).filter(e=>safe(()=>e.competitions[0].status.type.state)==='in').length;
    const hl=(nhl.events||[]).filter(e=>safe(()=>e.competitions[0].status.type.state)==='in').length;
    const tl=nl+hl;
    const stats=[
      {value:ng,label:'NBA Games Today',change:nl?nl+' Live Now':'Scheduled',up:nl>0},
      {value:hg,label:'NHL Games Today',change:hl?hl+' Live Now':'Scheduled',up:hl>0},
      {value:tl,label:'Total Live Now',change:tl?'üî¥ Broadcasting':'No Live Games',up:tl>0},
      {value:ng+hg,label:'Total Events Today',change:'NBA + NHL',up:true}
    ];
    document.getElementById('stats').innerHTML=stats.map(s=>'<div class="stat-box"><div class="stat-value">'+s.value+'</div><div class="stat-label">'+s.label+'</div><div class="stat-change '+(s.up?'change-up':'change-down')+'">'+s.change+'</div></div>').join('');
  }catch(e){document.getElementById('stats').innerHTML='<div class="stat-box" style="grid-column:1/-1"><div class="stat-label">Stats temporarily unavailable</div></div>';}
}

// Trending: live news
async function loadTrending(){
  loading('trending');
  try{
    const feeds=await Promise.all(SPORTS.slice(0,4).map(s=>
      fetch(ESPN+'/'+s.key+'/news').then(r=>r.json()).then(d=>
        (d.articles||[]).slice(0,3).map(a=>({title:a.headline,tags:[s.tag],meta:safe(()=>a.byline||'ESPN')+' ‚Ä¢ '+timeAgo(a.published),link:safe(()=>a.links.web.href,'#')}))
      ).catch(()=>[])
    ));
    const arts=feeds.flat().slice(0,8);
    document.getElementById('trending').innerHTML=arts.map((t,i)=>'<div class="trending-item"><div class="trending-rank">'+(i+1)+'</div><div class="trending-content"><h3><a href="'+t.link+'" target="_blank" rel="noopener">'+t.title+'</a></h3><div class="trending-meta">'+t.tags.map(tag=>'<span class="trending-tag">'+tag+'</span>').join('')+'<span>'+t.meta+'</span></div></div></div>').join('');
  }catch(e){document.getElementById('trending').innerHTML='<div style="color:var(--dim);padding:1rem">Unable to load trending</div>';}
}

// Broadcasts: today's games
async function loadBroadcasts(){
  loading('broadcasts');
  document.getElementById('broadcast-date').textContent=new Date().toLocaleDateString('en-US',{month:'short',day:'numeric'});
  try{
    const games=[];
    await Promise.all(SPORTS.slice(0,5).map(s=>
      fetch(ESPN+'/'+s.key+'/scoreboard').then(r=>r.json()).then(d=>{
        (d.events||[]).forEach(ev=>{
          const c=ev.competitions?.[0];if(!c)return;
          const st=safe(()=>c.status.type.state,'pre');
          const title=safe(()=>c.competitors[1].team.shortDisplayName+' vs. '+c.competitors[0].team.shortDisplayName,ev.shortName||'TBD');
          const bc=safe(()=>c.broadcasts[0].names[0],s.tag);
          const live=st==='in';
          games.push({time:live?'LIVE':st==='post'?'FINAL':fmtTime(ev.date),sport:s.tag,title:title,channel:bc,live:live,date:new Date(ev.date)});
        });
      }).catch(()=>{})
    ));
    games.sort((a,b)=>(b.live?1:0)-(a.live?1:0)||a.date-b.date);
    const d=games.slice(0,12);
    document.getElementById('broadcasts').innerHTML=d.length?d.map(b=>'<div class="broadcast-item"><span class="broadcast-time '+(b.live?'broadcast-live':'')+'">'+b.time+'</span><span class="broadcast-sport">'+b.sport+'</span><span class="broadcast-title">'+b.title+'</span><span class="broadcast-channel">'+b.channel+'</span></div>').join(''):'<div style="color:var(--dim);padding:1rem">No games scheduled today</div>';
  }catch(e){document.getElementById('broadcasts').innerHTML='<div style="color:var(--dim);padding:1rem">Unable to load schedule</div>';}
}

// NBA Standings
async function loadStandings(){
  loading('power-rankings');
  try{
    const d=await fetch(ESPN+'/basketball/nba/standings').then(r=>r.json());
    const all=[];
    (d.children||[]).forEach(conf=>{
      (conf.standings?.entries||[]).forEach(entry=>{
        const name=safe(()=>entry.team.displayName,'Unknown');
        const s=entry.stats||[];
        const w=s.find(x=>x.name==='wins')?.value||0,l=s.find(x=>x.name==='losses')?.value||0;
        const pct=parseFloat(s.find(x=>x.name==='winPercent')?.value||0);
        const streak=s.find(x=>x.name==='streak')?.displayValue||'‚Äî';
        all.push({name,w,l,pct,streak,color:NBA_COLORS[name]||'#888'});
      });
    });
    all.sort((a,b)=>b.pct-a.pct);
    document.getElementById('power-rankings').innerHTML=all.slice(0,10).map((t,i)=>'<div class="power-item"><span class="power-rank">'+(i+1)+'</span><span class="power-team"><span class="power-team-dot" style="background:'+t.color+'"></span>'+t.name+'</span><span class="power-record">'+t.w+'-'+t.l+'</span><span class="power-change" style="color:var(--dim)">'+t.streak+'</span></div>').join('');
  }catch(e){document.getElementById('power-rankings').innerHTML='<div style="color:var(--dim);padding:1rem">Unable to load standings</div>';}
}

// Editorial
async function loadEditorial(){
  loading('editorial');
  try{
    const [nfl,nba]=await Promise.all([fetch(ESPN+'/football/nfl/news').then(r=>r.json()),fetch(ESPN+'/basketball/nba/news').then(r=>r.json()).catch(()=>({articles:[]}))]);
    const all=[...(nfl.articles||[]).slice(0,3),...(nba.articles||[]).slice(0,3)];
    const cats=['Analysis','Feature','Opinion','Business','Data','Longform'];
    document.getElementById('editorial').innerHTML=all.map((a,i)=>'<div class="editorial-item"><h3><span class="editorial-category">'+cats[i%6]+'</span><a href="'+safe(()=>a.links.web.href,'#')+'" target="_blank" rel="noopener">'+a.headline+'</a></h3><div class="editorial-byline">'+safe(()=>a.byline||'ESPN Staff')+'</div></div>').join('');
  }catch(e){document.getElementById('editorial').innerHTML='<div style="color:var(--dim);padding:1rem">Unable to load editorial</div>';}
}

// Ratings: NBA game details
async function loadRatings(){
  try{
    const d=await fetch(ESPN+'/basketball/nba/scoreboard').then(r=>r.json());
    const g=(d.events||[]).slice(0,8);if(!g.length){document.getElementById('ratings').innerHTML='<tbody><tr><td colspan="5" style="text-align:center;color:var(--dim);padding:1rem">No games data</td></tr></tbody>';return;}
    const mx=Math.max(...g.map(x=>safe(()=>x.competitions[0].attendance,0)||0),1);
    document.getElementById('ratings').innerHTML='<thead><tr><th>Game</th><th>Venue</th><th>Status</th><th>Score</th><th>Attendance</th></tr></thead><tbody>'+g.map(x=>{
      const c=x.competitions?.[0]||{};const t0=c.competitors?.[0],t1=c.competitors?.[1];
      return '<tr><td style="font-weight:600">'+safe(()=>t1.team.shortDisplayName+' @ '+t0.team.shortDisplayName,x.shortName||'TBD')+'</td><td>'+safe(()=>c.venue.fullName,'TBD')+'</td><td>'+safe(()=>c.status.type.shortDetail,'')+'</td><td>'+safe(()=>t1.score+' - '+t0.score,'‚Äî')+'</td><td><div class="rating-bar"><div class="rating-fill" style="width:'+Math.round((safe(()=>c.attendance,0)||0)/mx*100)+'%"></div></div> '+safe(()=>c.attendance?.toLocaleString(),'‚Äî')+'</td></tr>';
    }).join('')+'</tbody>';
  }catch(e){document.getElementById('ratings').innerHTML='<tbody><tr><td style="color:var(--dim);padding:1rem">Unable to load</td></tr></tbody>';}
}

// Top Headlines
async function loadEspnPlus(){
  try{
    const results=[];
    await Promise.all(['basketball/nba','hockey/nhl','football/nfl','soccer/usa.1','basketball/mens-college-basketball'].map(f=>
      fetch(ESPN+'/'+f+'/news').then(r=>r.json()).then(d=>{const a=(d.articles||[])[0];if(a)results.push({title:a.headline,meta:timeAgo(a.published)});}).catch(()=>{})
    ));
    document.getElementById('espn-plus').innerHTML=results.slice(0,5).map((e,i)=>'<div class="stat-box"><div style="font-size:0.7rem;color:var(--accent);font-weight:700;margin-bottom:0.5rem">#'+(i+1)+'</div><div style="font-size:0.85rem;font-weight:600;margin-bottom:0.25rem">'+e.title+'</div><div style="font-size:0.8rem;color:var(--dim)">'+e.meta+'</div></div>').join('')||'<div class="stat-box" style="grid-column:1/-1"><div class="stat-label">No highlights</div></div>';
  }catch(e){document.getElementById('espn-plus').innerHTML='<div class="stat-box" style="grid-column:1/-1"><div class="stat-label">Unable to load</div></div>';}
}

// Init & auto-refresh
async function refresh(){await Promise.all([loadTicker(),loadStats(),loadTrending(),loadBroadcasts(),loadRatings(),loadStandings(),loadEditorial(),loadEspnPlus()])}
refresh();setInterval(refresh,120000);
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script>
(function(){
const seasons=['2020','2021','2022','2023','2024','2025'];
const gridColor='rgba(255,255,255,0.06)';
const tickColor='#8888a0';
const baseOpts={responsive:true,interaction:{mode:'index',intersect:false},plugins:{legend:{labels:{color:tickColor,font:{size:11}}},tooltip:{backgroundColor:'#1a1a26',borderColor:'#2a2a3a',borderWidth:1,titleColor:'#e8e8f0',bodyColor:'#e8e8f0'}},scales:{x:{ticks:{color:tickColor},grid:{color:gridColor}},y:{ticks:{color:tickColor,callback:v=>v>=1e6?(v/1e6).toFixed(1)+'M':v>=1e3?(v/1e3)+'K':v},grid:{color:gridColor}}}};

// Primetime viewership (millions)
new Chart(document.getElementById('chart-primetime'),{type:'line',data:{labels:seasons,datasets:[
{label:'Monday Night Football',data:[12800000,13200000,13100000,13800000,14900000,15200000],borderColor:'#c41e3a',backgroundColor:'rgba(196,30,58,0.1)',fill:true,tension:0.3},
{label:'NBA Finals (avg)',data:[7500000,9900000,12400000,11600000,11800000,12100000],borderColor:'#3498db',backgroundColor:'rgba(52,152,219,0.1)',fill:true,tension:0.3},
{label:'College GameDay',data:[1800000,1900000,2100000,2000000,2200000,2400000],borderColor:'#d4a843',backgroundColor:'rgba(212,168,67,0.1)',fill:true,tension:0.3}
]},options:{...baseOpts,plugins:{...baseOpts.plugins,title:{display:true,text:'Primetime Program Viewership',color:'#e8e8f0',font:{size:14,weight:600}}}}});

// Major events (millions)
new Chart(document.getElementById('chart-events'),{type:'bar',data:{labels:seasons,datasets:[
{label:'Super Bowl',data:[102000000,96400000,112300000,115100000,123700000,127000000],backgroundColor:'rgba(196,30,58,0.7)',borderColor:'#c41e3a',borderWidth:1},
{label:'CFP Championship',data:[25600000,22200000,24200000,25100000,28400000,30200000],backgroundColor:'rgba(52,152,219,0.7)',borderColor:'#3498db',borderWidth:1},
{label:'World Series (avg)',data:[9800000,11800000,12500000,9100000,15600000,14200000],backgroundColor:'rgba(212,168,67,0.7)',borderColor:'#d4a843',borderWidth:1}
]},options:{...baseOpts,plugins:{...baseOpts.plugins,title:{display:true,text:'Major Event Viewership',color:'#e8e8f0',font:{size:14,weight:600}}}}});

// Platform/streaming growth
new Chart(document.getElementById('chart-platform'),{type:'line',data:{labels:['Q1 2023','Q2 2023','Q3 2023','Q4 2023','Q1 2024','Q2 2024','Q3 2024','Q4 2024','Q1 2025'],datasets:[
{label:'ESPN+ Subscribers',data:[24800000,25300000,25900000,26200000,26800000,24900000,25500000,26100000,26700000],borderColor:'#c41e3a',backgroundColor:'rgba(196,30,58,0.08)',fill:true,tension:0.3},
{label:'ESPN App DAU',data:[8200000,8900000,10500000,11200000,11800000,12400000,13100000,14600000,15200000],borderColor:'#2ecc71',backgroundColor:'rgba(46,204,113,0.08)',fill:true,tension:0.3},
{label:'ESPN.com Unique Visitors',data:[88000000,92000000,105000000,98000000,91000000,95000000,108000000,102000000,96000000],borderColor:'#d4a843',backgroundColor:'rgba(212,168,67,0.08)',fill:true,tension:0.3,yAxisID:'y1'}
]},options:{...baseOpts,plugins:{...baseOpts.plugins,title:{display:true,text:'Digital Platform Growth',color:'#e8e8f0',font:{size:14,weight:600}}},scales:{...baseOpts.scales,y1:{position:'right',ticks:{color:tickColor,callback:v=>(v/1e6).toFixed(0)+'M'},grid:{drawOnChartArea:false}}}}});
})();
</script>
</body>
</html>
